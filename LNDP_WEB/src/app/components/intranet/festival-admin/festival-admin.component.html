<app-generic-window
  [contentTemplate]="contentTemplate"
  [windowTitle]="'Festivales'"
></app-generic-window>

<app-spinner *ngIf="this.spinner"></app-spinner>

<ng-template #addTemplate>
  <button
    [disabled]="newRowAdded || entryBeingEdited"
    id="add-button"
    class="add-button"
    (click)="showFormDialog()"
    matTooltip="Add User"
    matTooltipPosition="below"
    matTooltipShowDelay="500">
    <fa-icon [icon]="faPlus"></fa-icon>
  </button>
</ng-template>

<ng-template #contentTemplate>
  <app-generic-table
    [tableData]="festivales"
    [tableColumns]="festivalColumns"
    [isPageable]="true"
    [apiFailing]="apiFailing"
    [isSortable]="true"
    (filtered)="filterData($event)"
    [hasActions]="true"
    (modified)="updateElement($event)"
    (rowAdded)="newRowAdded = $event"
    (create)="createElement($event)"
    (delete)="deleteElement($event)"
    [paginationSizes]="[5, 10, 20]"
    [pageSize]="pageSize"
    [pageNumber]="pageNumber"
    [totalRecords]="totalFestivales"
    (paginationChange)="onPaginationChange($event)"
    [canManageColumns]="true"
    [hasFilter]="true"
    (edited)="entryBeingEdited = $event"
    [iconButtons]="iconButtons"
    *ngIf="loaded"
  >
  </app-generic-table>
</ng-template>

<ng-template #artistTemplate let-rowData="rowData">
  <button
  class="button"
  matTooltip="Ver artistas"
  matTooltipPosition="right"
  matTooltipShowDelay="500"
  aria-label="Ver artistas"
  (click)="showArtistFestival(rowData)"
  >
    <mat-icon>card_travel</mat-icon>
  </button>
</ng-template>

<ng-template #imageTemplate let-rowData="rowData">
  <button mat-icon-button malToolTipe="Ver la imagen" matTooltipShowDelay="1000" aria-label="Ver la imagen"
    (click)="showFormDialogImage(rowData)">
    <mat-icon>image</mat-icon>
  </button>
</ng-template>

